{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// API Configuration\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080/api';\n\n// Create axios instance\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('auth_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(response => {\n  return response;\n}, error => {\n  // Handle different error statuses\n  if (error.response) {\n    const {\n      status,\n      data\n    } = error.response;\n    switch (status) {\n      case 401:\n        // Unauthorized - redirect to login\n        localStorage.removeItem('auth_token');\n        if (!window.location.pathname.includes('/login')) {\n          window.location.href = '/login';\n        }\n        break;\n      case 403:\n        // Forbidden\n        toast.error('You do not have permission to perform this action');\n        break;\n      case 404:\n        // Not found\n        toast.error('Resource not found');\n        break;\n      case 422:\n        // Validation error\n        const validationError = data.message || 'Validation failed';\n        toast.error(validationError);\n        break;\n      case 500:\n        // Server error\n        toast.error('Internal server error. Please try again later.');\n        break;\n      default:\n        // Other errors\n        const errorMessage = data.message || `Error ${status}: ${error.message}`;\n        toast.error(errorMessage);\n    }\n  } else if (error.request) {\n    // Network error\n    toast.error('Network error. Please check your connection and try again.');\n  } else {\n    // Other errors\n    toast.error('An unexpected error occurred');\n  }\n  return Promise.reject(error);\n});\nexport default apiClient;","map":{"version":3,"names":["axios","toast","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","apiClient","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","status","data","removeItem","window","location","pathname","includes","href","validationError","message","errorMessage"],"sources":["C:/Users/pc/employee-attendance-system/frontend/src/services/apiClient.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n// API Configuration\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080/api';\r\n\r\n// Create axios instance\r\nconst apiClient: AxiosInstance = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napiClient.interceptors.request.use(\r\n  (config: any) => {\r\n    const token = localStorage.getItem('auth_token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle errors\r\napiClient.interceptors.response.use(\r\n  (response: AxiosResponse) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // Handle different error statuses\r\n    if (error.response) {\r\n      const { status, data } = error.response;\r\n      \r\n      switch (status) {\r\n        case 401:\r\n          // Unauthorized - redirect to login\r\n          localStorage.removeItem('auth_token');\r\n          if (!window.location.pathname.includes('/login')) {\r\n            window.location.href = '/login';\r\n          }\r\n          break;\r\n          \r\n        case 403:\r\n          // Forbidden\r\n          toast.error('You do not have permission to perform this action');\r\n          break;\r\n          \r\n        case 404:\r\n          // Not found\r\n          toast.error('Resource not found');\r\n          break;\r\n          \r\n        case 422:\r\n          // Validation error\r\n          const validationError = data.message || 'Validation failed';\r\n          toast.error(validationError);\r\n          break;\r\n          \r\n        case 500:\r\n          // Server error\r\n          toast.error('Internal server error. Please try again later.');\r\n          break;\r\n          \r\n        default:\r\n          // Other errors\r\n          const errorMessage = data.message || `Error ${status}: ${error.message}`;\r\n          toast.error(errorMessage);\r\n      }\r\n    } else if (error.request) {\r\n      // Network error\r\n      toast.error('Network error. Please check your connection and try again.');\r\n    } else {\r\n      // Other errors\r\n      toast.error('An unexpected error occurred');\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default apiClient;"],"mappings":"AAAA,OAAOA,KAAK,MAA4D,OAAO;AAC/E,SAASC,KAAK,QAAQ,gBAAgB;;AAEtC;AACA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,2BAA2B;;AAEtF;AACA,MAAMC,SAAwB,GAAGN,KAAK,CAACO,MAAM,CAAC;EAC5CC,OAAO,EAAEN,YAAY;EACrBO,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAJ,SAAS,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/BC,MAAW,IAAK;EACf,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EAChD,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAb,SAAS,CAACK,YAAY,CAACW,QAAQ,CAACT,GAAG,CAChCS,QAAuB,IAAK;EAC3B,OAAOA,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT;EACA,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAClB,MAAM;MAAEC,MAAM;MAAEC;IAAK,CAAC,GAAGL,KAAK,CAACG,QAAQ;IAEvC,QAAQC,MAAM;MACZ,KAAK,GAAG;QACN;QACAP,YAAY,CAACS,UAAU,CAAC,YAAY,CAAC;QACrC,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,QAAQ,CAAC,EAAE;UAChDH,MAAM,CAACC,QAAQ,CAACG,IAAI,GAAG,QAAQ;QACjC;QACA;MAEF,KAAK,GAAG;QACN;QACA7B,KAAK,CAACkB,KAAK,CAAC,mDAAmD,CAAC;QAChE;MAEF,KAAK,GAAG;QACN;QACAlB,KAAK,CAACkB,KAAK,CAAC,oBAAoB,CAAC;QACjC;MAEF,KAAK,GAAG;QACN;QACA,MAAMY,eAAe,GAAGP,IAAI,CAACQ,OAAO,IAAI,mBAAmB;QAC3D/B,KAAK,CAACkB,KAAK,CAACY,eAAe,CAAC;QAC5B;MAEF,KAAK,GAAG;QACN;QACA9B,KAAK,CAACkB,KAAK,CAAC,gDAAgD,CAAC;QAC7D;MAEF;QACE;QACA,MAAMc,YAAY,GAAGT,IAAI,CAACQ,OAAO,IAAI,SAAST,MAAM,KAAKJ,KAAK,CAACa,OAAO,EAAE;QACxE/B,KAAK,CAACkB,KAAK,CAACc,YAAY,CAAC;IAC7B;EACF,CAAC,MAAM,IAAId,KAAK,CAACP,OAAO,EAAE;IACxB;IACAX,KAAK,CAACkB,KAAK,CAAC,4DAA4D,CAAC;EAC3E,CAAC,MAAM;IACL;IACAlB,KAAK,CAACkB,KAAK,CAAC,8BAA8B,CAAC;EAC7C;EAEA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeb,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}